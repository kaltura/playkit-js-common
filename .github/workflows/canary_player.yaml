## Canary CI/CD for player type
name: Base Canary Player Type
run-name: Base Canary Player Type

on:
  workflow_call:
    inputs:
      schema-type:
        description: "schema-type - example: 'playerV3Versions/playerV3OvpVersions'"
        required: true
        type: string
      tests-yarn-run-to-execute:
        description: "list of package.json scripts - example: 'eslint flow test'"
        required: true
        type: string
      yarn-upgrade-list:
        description: "list of packages to overwrite in package.json - example: 'playkit-js/playkit-js@canary @playkit-js/playkit-js-dash@canary'"
        required: false
        type: string
      player-type:
        description: "player type - example 'ovp tv'"
        required: false
        type: string
      node-version:
        description: "which node version to use - example: '17.x/18.x'"
        required: false
        type: string
        default: '17.x'

jobs:
  set_stage:
    uses: ./.github/workflows/get_stage.yaml
  print_stage:
    run: |
      echo "stage output -->"
      echo ${{ needs.set_stage.outputs.stage }}
#  canary:
#    uses: ./.github/workflows/lian_player_cicd.yaml
#    secrets:
#      PLAYER_CENTRAL_ACCOUNT_ID: ${{ secrets.PLAYER_CENTRAL_ACCOUNT_ID }}
#      PLAYER_SERVICES_ACCOUNT_ID: ${{ secrets.PLAYER_SERVICES_ACCOUNT_ID }}
#      PLAYER_S3_BUCKET_DEPLOYMENT: ${{ secrets.PLAYER_S3_BUCKET_DEPLOYMENT }}
#      PLAYER_S3_BUCKET_APPS: ${{ secrets.PLAYER_S3_BUCKET_APPS }}
#      PLAYER_NPM_TOKEN: ${{ secrets.PLAYER_NPM_TOKEN }}
#      PLAYER_LAMBDA_NAME: ${{ secrets.PLAYER_LAMBDA_NAME }}
#      PLAYER_MSTEAMS_WEBHOOK: ${{ secrets.PLAYER_MSTEAMS_WEBHOOK }}
#      PLAYER_GITHUB_BOT_TOKEN: ${{ secrets.PLAYER_GITHUB_BOT_TOKEN }}
#      PLAYER_GITHUB_KCONF_TOKEN: ${{ secrets.PLAYER_GITHUB_KCONF_TOKEN }}
#    with:
#      type: "player"
#      stage: ${{ needs.set_stage.outputs.stage }}
#      node-version: ${{ inputs.node-version }}
#      schema-type: ${{ inputs.schema-type }}
#      tests-yarn-run-to-execute: ${{ inputs.tests-yarn-run-to-execute }}
#      yarn-upgrade-list: ${{ inputs.yarn-upgrade-list }}
#      player-type: ${{ inputs.player-type }}


